# Router

Instantiates a server framework-agnostic router for Porto.

<center>
  <img src="/router.svg" alt="Router" />
</center>

## Usage

```ts twoslash
// @noErrors
import { Router, Route } from 'porto/server'

const router = Router()
  .route('/merchant', Route.merchant({/* ... */})
  // .route('/auth', Route.auth({/* ... */}) ðŸš§
  // .route('/rpc', Route.relay({/* ... */}) ðŸš§
```

## Routes

| Route | Description |
| ----- | --------- |
| [`Route.merchant`](/sdk/api/route/merchant) | Route for Merchant RPC (call sponsoring, subscriptions, etc). |
| `Route.auth` ðŸš§ | Route for a user authentication service. |
| `Route.relay` ðŸš§ | Route for self-hosted Relay RPC. |

## Frameworks

### Cloudflare Workers

```ts
import { env } from 'cloudflare:workers'
import { Router, Route } from 'porto/server'

export default Router({ basePath: '/porto' })
  .route('/merchant', Route.merchant({ /* ... */ })
  // .route('/auth', Route.auth({/* ... */}) ðŸš§
  // .route('/rpc', Route.relay({/* ... */}) ðŸš§
) satisfies ExportedHandler<Env>
```

### Next.js

```ts [app/porto/[[...routes]]/route.ts]
import { Router, Route } from 'porto/server'

const porto = Router({ basePath: '/porto' })
  .route('/merchant', Route.merchant({ /* ... */ })
  // .route('/auth', Route.auth({/* ... */}) ðŸš§
  // .route('/rpc', Route.relay({/* ... */}) ðŸš§
)

export const GET = porto.fetch
export const OPTIONS = porto.fetch
export const POST = porto.fetch
```

### Hono

```ts
import { Hono } from 'hono'
import { Router, Route } from 'porto/server'

const app = new Hono()

const porto = Router()
  .route('/merchant', Route.merchant({ /* ... */ })
  // .route('/auth', Route.auth({/* ... */}) ðŸš§
  // .route('/rpc', Route.relay({/* ... */}) ðŸš§
)


app.route('/porto', porto.hono)

export default app
```

### Bun

```ts
import { Router, Route } from 'porto/server'

const porto = Router({ basePath: '/porto' })
  .route('/merchant', Route.merchant({ /* ... */ })
  // .route('/auth', Route.auth({/* ... */}) ðŸš§
  // .route('/rpc', Route.relay({/* ... */}) ðŸš§
)

Bun.serve(porto)
```

### Deno

```ts
import { Router, Route } from 'porto/server'

const porto = Router({ basePath: '/porto' })
  .route('/merchant', Route.merchant({ /* ... */ })
  // .route('/auth', Route.auth({/* ... */}) ðŸš§
  // .route('/rpc', Route.relay({/* ... */}) ðŸš§
)

Deno.serve(porto.fetch)
```

### Express

```ts
import express from 'express'
import { Router, Route } from 'porto/server'

const app = express()

const porto = Router({ basePath: '/porto' })
  .route('/merchant', Route.merchant({ /* ... */ })
  // .route('/auth', Route.auth({/* ... */}) ðŸš§
  // .route('/rpc', Route.relay({/* ... */}) ðŸš§
)

app.use(porto.listener)

app.listen(3000)
```

### Other Frameworks

If you would like to see an example of your framework here, please [open a discussion](https://github.com/ithacaxyz/porto/discussions/new) and we'll add it.
